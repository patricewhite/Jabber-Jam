"use strict";function addToData(e){var t={title:e.find("#title").val().toLowerCase(),category:e.find("#category").val().toLowerCase()};e.find("#title").val(""),e.find("#category").val("");return fetch("https://jabber-jam.herokuapp.com/chatrooms",{method:"POST",mode:"cors",headers:new Headers({"Content-Type":"application/json",Authorization:"Basic "+btoa("loco4:dance")}),body:JSON.stringify(t)}).then(function(e){return e.ok?e.json():Promise.reject(e.statusText)})}function getDataChatroom(){return fetch("https://jabber-jam.herokuapp.com/chatrooms",{method:"GET",mode:"cors",headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.ok?e.json():Promise.reject(e.statusText)})}function getDataCategory(){return fetch("https://jabber-jam.herokuapp.com/chatrooms/distinct",{method:"GET",mode:"cors",headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.ok?e.json():Promise.reject(e.statusText)})}function getChatroomById(e){return fetch("https://jabber-jam.herokuapp.com/chatrooms/"+e,{method:"GET",mode:"cors",headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.ok?e.json():Promise.reject(e.statusText)})}function addMsgToDb(e,t){e.sentMessages.push({id:e.userId,message:t});var n={id:e.chatId,messages:e.sentMessages};return fetch("https://jabber-jam.herokuapp.com/chatrooms/"+e.chatId,{method:"PUT",mode:"cors",headers:new Headers({"Content-Type":"application/json",Authorization:"Basic "+btoa("loco4:dance")}),body:JSON.stringify(n)}).then(function(e){return e.ok?e.json():Promise.reject(e.statusText)})}function addCatToDb(e,t){e.category=t;var n={id:e.chatId,category:e.category};return fetch("https://jabber-jam.herokuapp.com/chatrooms/"+e.chatId,{method:"PUT",mode:"cors",headers:new Headers({"Content-Type":"application/json",Authorization:"Basic "+btoa("loco4:dance")}),body:JSON.stringify(n)}).then(function(e){return e.ok?e.json():Promise.reject(e.statusText)})}function addTitleToDb(e,t){e.title=t;var n={id:e.chatId,title:e.title};return fetch("https://jabber-jam.herokuapp.com/chatrooms/"+e.chatId,{method:"PUT",mode:"cors",headers:new Headers({"Content-Type":"application/json",Authorization:"Basic "+btoa("loco4:dance")}),body:JSON.stringify(n)}).then(function(e){return e.ok?e.json():Promise.reject(e.statusText)})}function deleteFromDb(e){return fetch("https://jabber-jam.herokuapp.com/chatrooms/"+e.chatId,{method:"DELETE",mode:"cors",headers:new Headers({"Content-Type":"application/json",Authorization:"Basic "+btoa("loco4:dance")})}).then(function(){alert("You have deleted the chatroom with title "+e.title+" with category "+e.category),renderHideMainShowChat(e,$(".main_hide_show"),$(".single_chatroom")),mainScreenInit(e,$(".list_chatroom"),$(".category_list"),$(".single_chatroom"))})}function mainScreenInit(e,t,n,o){hideChatroom(o),Promise.all([showDistinctChatroom(e,n),showFilteredOrAllChatrooms(e,t)])}function showDistinctChatroom(e,t){getDataCategory(e).then(function(n){e.categoryList=n,renderCategoryList(e,t)})}function showFilteredOrAllChatrooms(e,t,n){getDataChatroom(e).then(function(o){var a=void 0;n?a=filterChatroom(e,n.text(),o):(e.chatroomList=o,a=e.chatroomList),renderChatroomList(e,t,a)})}function initChatroom(e,t){getChatroomById(t.attr("data-id")).then(function(t){setInitialState(e,t),renderChatroomPage(appState,$(".conversation"),$(".delete_update")),renderHideMainShowChat(appState,$(".main_hide_show"),$(".single_chatroom"))})}function setCatValue(e,t,n){addCatToDb(e,t.val()).then(function(t){setStateToUpdCat(e,t),renderUpdTitleCat(e,n)})}function setTitleValue(e,t,n){addTitleToDb(e,t.val()).then(function(t){setStateToUpdTitle(e,t),renderUpdTitleCat(e,n)})}function setUpdatedMessages(e,t,n){getChatroomById(e.chatId).then(function(n){return setSentMsgToRes(e,n),addMsgToDb(e,t)}).then(function(t){setSentMsgToRes(e,t),renderChatroomMessages(e,n)}).catch(function(t){alert("This chatroom has been deleted"),console.log(t),renderHideMainShowChat(e,$(".main_hide_show"),$(".single_chatroom")),mainScreenInit(e,$(".list_chatroom"),$(".category_list"),$(".single_chatroom"))})}function filterChatroom(e,t,n){return e.chatroomList=n,e.filterChatroomList=e.chatroomList.filter(function(e){return e.category===t}),e.filterChatroomList}function setInitialState(e,t){e.chatId=t.id,e.sentMessages=t.messages,e.title=t.title,e.category=t.category}function setSentMsgToRes(e,t){e.sentMessages=t.messages}function setUserId(e){e.userId=Math.floor(100*Math.random())}function setStateToUpdTitle(e,t){e.title=t.title}function setStateToUpdCat(e,t){e.category=t.category}function changeShowHide(e){return e.isMainScreen?e.isMainScreen=!1:e.isMainScreen=!0,e}function resetState(e){e.chatId="",e.sentMessages=[]}function renderChatroomList(e,t,n){var o="<p>Chatroom List</p>\n          <ul>";o+=n.map(function(e){return"<li data-id="+e.id+">"+e.title+"</li>"}).join("\n\t")+"</ul>",t.html(o)}function renderCategoryList(e,t){var n="<p>Categories</p>\n        <ul>";n+=e.categoryList.map(function(e){return"<li>"+e+"</li>"}).join("\n\t")+"</ul>",t.html(n)}function renderHideMainShowChat(e,t,n){e.isMainScreen?(changeShowHide(e),t.hide(),n.show()):(changeShowHide(e),t.show(),n.hide())}function hideChatroom(e){e.hide()}function renderChatroomPage(e,t,n){renderChatroomMessages(e,t),renderUpdTitleCat(e,n)}function renderChatroomMessages(e,t){var n=void 0;e.sentMessages.length>0&&(n=e.sentMessages.map(function(e){return"<li>"+e.id+": "+e.message+"</li>"}).join("\n")),t.html(n)}function renderUpdTitleCat(e,t){var n='\n        <ul>\n          <li class ="updT">'+e.title+'</li>\n          <input type="text" id="updateTitle" name="updateTitle" placeholder="Change Title">\n          <li class = "updCat">'+e.category+'</li>\n          <input type="text" id="updateCat" name="updateCat" placeholder="Change Category">\n          <li class = "deleteChat">Delete Chatroom</li>\n        </ul>';t.html(n)}function renderNavBar(e,t){var n='\n      <li class="nav_el"><a href="mainScreen.html" class="home">Jabber Jam</a></li>\n      <li class="nav_user"><p class="username">'+e.userId+"</p></li>";t.html(n)}function createChatroom(e){$(".chatroom_form").on("submit",function(t){t.preventDefault(),addToData($(".chatroom_form")).then(function(t){alert("You have created the chatroom with the title "+t.title+" and category "+t.category),mainScreenInit(e,$(".list_chatroom"),$(".category_list"),$(".single_chatroom"))})})}function showFilterChatroom(e){$(".category_list").on("click","li",function(t){showFilteredOrAllChatrooms(e,$(".list_chatroom"),$(this))})}function showAllChatrooms(e){$(".category_list").on("click","p",function(t){showFilteredOrAllChatrooms(e,$(".list_chatroom"))})}function hideMainScreen(e){$(".list_chatroom").on("click","li",function(t){initChatroom(e,$(this))})}function updChatroomMsgClick(e){$(".messages").on("click","#button",function(t){t.preventDefault(),setUpdatedMessages(e,$("#text").val(),$(".conversation")),$("#text").val("")})}function updChatroomMsgEnter(e){$(".messages").on("keypress","#text",function(t){13===t.which&&(event.preventDefault(),setUpdatedMessages(e,$("#text").val(),$(".conversation")),$("#text").val(""))})}function updTitleEnter(e){$(".delete_update").on("keypress","#updateTitle",function(t){13===t.which&&(event.preventDefault(),setTitleValue(e,$("#updateTitle"),$(".delete_update")),$("#updateTitle").val(""))})}function updCatEnter(e){$(".delete_update").on("keypress","#updateCat",function(t){13===t.which&&(event.preventDefault(),setCatValue(e,$("#updateCat"),$(".delete_update")),$("#updateCat").val(""))})}function delChatroom(e){$(".delete_update").on("click",".deleteChat",function(t){deleteFromDb(e)})}function goBackToMain(e){$(".go_back_to_main").on("click","p",function(t){renderHideMainShowChat(e,$(".main_hide_show"),$(".single_chatroom")),mainScreenInit(e,$(".list_chatroom"),$(".category_list"),$(".single_chatroom"))})}function initPage(e){renderNavBar(e,$(".nav_bar")),mainScreenInit(e,$(".list_chatroom"),$(".category_list"),$(".single_chatroom"))}function categoryListStorage(e){showFilterChatroom(e),showAllChatrooms(e)}function updateStorage(e){updChatroomMsgClick(e),updChatroomMsgEnter(e),updTitleEnter(e),updCatEnter(e)}function changeToLoginBool(e){return e.login=!0,e.signUp=!1,e}function changeToSignUpBool(e){return e.login=!1,e.signUp=!0,e}function storeUserSignUpInfo(){return{username:$("#username").val(),password:$("#password").val(),firstName:$("#first-name").val(),lastName:$("#last-name").val(),email:$("#email").val()}}function storeUserLoginInfo(){return{username:$("#username").val(),password:$("#password").val()}}function addUser(e){return fetch("/users",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then(function(e){return e.ok?e.json():Promise.reject(e.statusText)})}function checkUser(e){return fetch("/users",{method:"GET",headers:new Headers({"Content-Type":"application/json"})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).catch(function(e){console.error(e)})}function render(e,t){var n=void 0;e.signUp&&!1===e.login?n='\n    <form class="signup_form"action="index.html">\n        <fieldset name="signup">\n          <legend class="signup_legend">Sign Up</legend>\n          <label for="first-name">First Name</label>\n          <input type="text" placeholder="Chris" id="first-name" name="first-name"/>\n          <label for="last-name">Last Name</label>\n          <input type="text" placeholder="Klanac" id="last-name" name="last-name"/>\n          <label for="username">Username</label>\n          <input type="text" placeholder="hiChris" id="username" name="username" required/>\n          <label for="password">Password</label>\n          <input type="password" placeholder="password" id="password" name="password" required/>\n          <label for="email">Email</label>\n          <input type="email" placeholder="hiChris@gmail.com" id="email" name="email" required/>\n        </fieldset>\n        <button class="js-change-login" type=\'submit\'>Sign Up</button>\n      </form>':e.login&&!1===e.signUp&&(n='\n      <form class="login_form" action="mainScreen.html">\n        <fieldset name="login">\n          <legend class="login_legend">Login</legend>\n          <label for="username">Username</label>\n          <input type="text" placeholder="hiChris" id="username" name="username" required/>\n          <label for="password">Password</label>\n          <input type="password" placeholder="password" id="password" name="password" required/>\n        </fieldset>\n        <button id=\'logIn\' type=\'submit\'>Login</button>\n      </form>'),t.html(n)}function changeToLogin(e){$(".login").on("click",function(t){changeToLoginBool(e),render(e,$(".container"))})}function changeToSignUp(e){$(".signup").on("click",function(t){changeToSignUpBool(e),render(e,$(".container"))})}function cLoginAfterSignUp(e){$(".container").on("click",".js-change-login",function(t){t.preventDefault(),changeToLoginBool(e),addUser(storeUserSignUpInfo()),render(e,$(".container"))})}function loggingIn(e){$(".container").on("submit",".login_form",function(t){t.preventDefault(),checkUser(storeUserLoginInfo()),render(e,$(".container"))})}var appState={signUp:!0,login:!1,chatroomList:[],categoryList:[],filterChatroomList:[],sentMessages:[],title:"",category:"",chatId:"",userId:0,isMainScreen:!0},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).base64js=e()}}(function(){return function e(t,n,o){function a(i,s){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(r)return r(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){var n=t[i][1][e];return a(n||e)},d,d.exports,e,t,n,o)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)a(o[i]);return a}({"/":[function(e,t,n){function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function a(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function r(e,t,n){for(var o,r=[],i=t;i<n;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],r.push(a(o));return r.join("")}n.byteLength=function(e){return 3*e.length/4-o(e)},n.toByteArray=function(e){var t,n,a,r,i,l,d=e.length;i=o(e),l=new c(3*d/4-i),a=i>0?d-4:d;var u=0;for(t=0,n=0;t<a;t+=4,n+=3)r=s[e.charCodeAt(t)]<<18|s[e.charCodeAt(t+1)]<<12|s[e.charCodeAt(t+2)]<<6|s[e.charCodeAt(t+3)],l[u++]=r>>16&255,l[u++]=r>>8&255,l[u++]=255&r;return 2===i?(r=s[e.charCodeAt(t)]<<2|s[e.charCodeAt(t+1)]>>4,l[u++]=255&r):1===i&&(r=s[e.charCodeAt(t)]<<10|s[e.charCodeAt(t+1)]<<4|s[e.charCodeAt(t+2)]>>2,l[u++]=r>>8&255,l[u++]=255&r),l},n.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a="",s=[],c=16383,l=0,d=n-o;l<d;l+=c)s.push(r(e,l,l+c>d?d:l+c));return 1===o?(t=e[n-1],a+=i[t>>2],a+=i[t<<4&63],a+="=="):2===o&&(t=(e[n-2]<<8)+e[n-1],a+=i[t>>10],a+=i[t>>4&63],a+=i[t<<2&63],a+="="),s.push(a),s.join("")};for(var i=[],s=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,u=l.length;d<u;++d)i[d]=l[d],s[l.charCodeAt(d)]=d;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}]},{},[])("/")}),$(function(){setUserId(appState),initPage(appState),createChatroom(appState),categoryListStorage(appState),hideMainScreen(appState),updateStorage(appState),delChatroom(appState),goBackToMain(appState),resetState(appState)}),$(function(e){render(appState,$(".container")),changeToLogin(appState),changeToSignUp(appState),cLoginAfterSignUp(appState),loggingIn(appState)}),function(e){var t={box:function(){e("body").append('\n        <div class="viewport">\n          <span id="t-width"></span> x <span id="t-height"></span>\n        </div>\n      ')},calculateDimensions:function(){var t=window.innerWidth,n=window.innerHeight;e("#t-width").html(t),e("#t-height").html(n)},init:function(){t.box(),t.sizer()},sizer:function(){t.calculateDimensions(),t.toggleBox()},toggleBox:function(){e(".viewport").click(function(){e(this).toggleClass("inactive")})}};e(window).on("load",function(){t.init()}),e(window).on("resize",function(){t.sizer()})}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1haW5zY3JlZW4uanMiLCJzaWdudXBfbG9naW4uanMiLCJiYXNlNjRqcy5taW4uanMiLCJzaXplci5qcyJdLCJuYW1lcyI6WyJhZGRUb0RhdGEiLCJlbGVtZW50Iiwib2JqIiwidGl0bGUiLCJmaW5kIiwidmFsIiwidG9Mb3dlckNhc2UiLCJjYXRlZ29yeSIsImZldGNoIiwibWV0aG9kIiwibW9kZSIsImhlYWRlcnMiLCJIZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiQXV0aG9yaXphdGlvbiIsImJ0b2EiLCJ1c2VybmFtZSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXNUZXh0IiwiZ2V0RGF0YUNoYXRyb29tIiwiZ2V0RGF0YUNhdGVnb3J5IiwiZ2V0Q2hhdHJvb21CeUlkIiwiaWQiLCJhZGRNc2dUb0RiIiwic3RhdGUiLCJtZXNzYWdlIiwic2VudE1lc3NhZ2VzIiwicHVzaCIsInVzZXJJZCIsIm9iamVjdCIsImNoYXRJZCIsIm1lc3NhZ2VzIiwiYWRkQ2F0VG9EYiIsImFkZFRpdGxlVG9EYiIsImRlbGV0ZUZyb21EYiIsImFsZXJ0IiwicmVuZGVySGlkZU1haW5TaG93Q2hhdCIsIiQiLCJtYWluU2NyZWVuSW5pdCIsImNoYXRyb29tRWxlbWVudCIsImNhdGVnb3J5RWxlbWVudCIsImhpZGVDaGF0RWxlbWVudCIsImhpZGVDaGF0cm9vbSIsImFsbCIsInNob3dEaXN0aW5jdENoYXRyb29tIiwic2hvd0ZpbHRlcmVkT3JBbGxDaGF0cm9vbXMiLCJyZXNRIiwiY2F0ZWdvcnlMaXN0IiwicmVuZGVyQ2F0ZWdvcnlMaXN0IiwiY2hhdHJvb21BcnIiLCJmaWx0ZXJDaGF0cm9vbSIsInRleHQiLCJjaGF0cm9vbUxpc3QiLCJyZW5kZXJDaGF0cm9vbUxpc3QiLCJpbml0Q2hhdHJvb20iLCJhdHRyIiwic2V0SW5pdGlhbFN0YXRlIiwicmVuZGVyQ2hhdHJvb21QYWdlIiwiYXBwU3RhdGUiLCJzZXRDYXRWYWx1ZSIsInNlbnRFbGVtZW50IiwidGl0bGVFbGVtZW50IiwicmVzVXBkIiwic2V0U3RhdGVUb1VwZENhdCIsInJlbmRlclVwZFRpdGxlQ2F0Iiwic2V0VGl0bGVWYWx1ZSIsInNldFN0YXRlVG9VcGRUaXRsZSIsInNldFVwZGF0ZWRNZXNzYWdlcyIsInNlbnRWYWwiLCJtZXNzYWdlRWxlbWVudCIsInJlc0dldCIsInNldFNlbnRNc2dUb1JlcyIsInJlbmRlckNoYXRyb29tTWVzc2FnZXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhcnIiLCJmaWx0ZXJDaGF0cm9vbUxpc3QiLCJmaWx0ZXIiLCJlbCIsInNldFVzZXJJZCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNoYW5nZVNob3dIaWRlIiwiaXNNYWluU2NyZWVuIiwicmVzZXRTdGF0ZSIsImh0bWxTdHIiLCJtYXAiLCJqb2luIiwiaHRtbCIsIm1haW5FbGVtZW50Iiwic2hvd0VsZW1lbnQiLCJoaWRlIiwic2hvdyIsIm1zZ0VsZW1lbnQiLCJ0aXRsZUNhdEVsZW1lbnQiLCJtc2ciLCJsZW5ndGgiLCJyZW5kZXJOYXZCYXIiLCJjcmVhdGVDaGF0cm9vbSIsIm9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInNob3dGaWx0ZXJDaGF0cm9vbSIsInRoaXMiLCJzaG93QWxsQ2hhdHJvb21zIiwiaGlkZU1haW5TY3JlZW4iLCJ1cGRDaGF0cm9vbU1zZ0NsaWNrIiwidXBkQ2hhdHJvb21Nc2dFbnRlciIsImUiLCJ3aGljaCIsInVwZFRpdGxlRW50ZXIiLCJ1cGRDYXRFbnRlciIsImRlbENoYXRyb29tIiwiZ29CYWNrVG9NYWluIiwiaW5pdFBhZ2UiLCJjYXRlZ29yeUxpc3RTdG9yYWdlIiwidXBkYXRlU3RvcmFnZSIsImNoYW5nZVRvTG9naW5Cb29sIiwibG9naW4iLCJzaWduVXAiLCJjaGFuZ2VUb1NpZ25VcEJvb2wiLCJzdG9yZVVzZXJTaWduVXBJbmZvIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwic3RvcmVVc2VyTG9naW5JbmZvIiwiYWRkVXNlciIsInVzZXIiLCJjaGVja1VzZXIiLCJFcnJvciIsImVycm9yIiwicmVuZGVyIiwiZm9ybVN0ciIsImNoYW5nZVRvTG9naW4iLCJjaGFuZ2VUb1NpZ25VcCIsImNMb2dpbkFmdGVyU2lnblVwIiwibG9nZ2luZ0luIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJyIiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImdsb2JhbCIsInNlbGYiLCJiYXNlNjRqcyIsInQiLCJuIiwibyIsImkiLCJhIiwidSIsInJlcXVpcmUiLCJmIiwiZCIsImNvZGUiLCJjIiwiY2FsbCIsIi8iLCJsIiwiaCIsImJ5dGVMZW5ndGgiLCJ0b0J5dGVBcnJheSIsInYiLCJjaGFyQ29kZUF0IiwiZnJvbUJ5dGVBcnJheSIsIlVpbnQ4QXJyYXkiLCJBcnJheSIsImFwcCIsImJveCIsImFwcGVuZCIsImNhbGN1bGF0ZURpbWVuc2lvbnMiLCJ3IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiaW5pdCIsInNpemVyIiwidG9nZ2xlQm94IiwiY2xpY2siLCJ0b2dnbGVDbGFzcyIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBQUEsYUNNQSxTQUFBQSxVQUFBQyxHQUNBLElBQUFDLEdBQ0FDLE1BQUFGLEVBQUFHLEtBQUEsVUFBQUMsTUFBQUMsY0FDQUMsU0FBQU4sRUFBQUcsS0FBQSxhQUFBQyxNQUFBQyxlQUVBTCxFQUFBRyxLQUFBLFVBQUFDLElBQUEsSUFDQUosRUFBQUcsS0FBQSxhQUFBQyxJQUFBLElBR0EsT0FBQUcsTUFBQSw4Q0FDQUMsT0FBQSxPQUNBQyxLQUFBLE9BQ0FDLFFBQUEsSUFBQUMsU0FDQUMsZUFBQSxtQkFDQUMsY0FBQSxTQUFBQyxLQUFBQyxpQkFFQUMsS0FBQUMsS0FBQUMsVUFBQWpCLEtBQ0FrQixLQUFBLFNBQUFD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QUNBUixFQUFBRyxzQkFDQUgsRUFBQVMsYUFFQUEsVUFBQSxXQUNBckosRUFBQSxhQUFBc0osTUFBQSxXQUNBdEosRUFBQXFFLE1BQUFrRixZQUFBLGdCQUtBdkosRUFBQWtILFFBQUFqRCxHQUFBLE9BQUEsV0FDQTJFLEVBQUFPLFNBR0FuSixFQUFBa0gsUUFBQWpELEdBQUEsU0FBQSxXQUNBMkUsRUFBQVEsVUFoQ0EsQ0FrQ0FsQyxPQUFBc0MiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLyAgICAgICAgICBTdGF0ZSAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG52YXIgYXBwU3RhdGUgPSB7XG4gIC8vIHNpZ251cF9sb2dpbi5qcyBzdHVmZlxuICBzaWduVXA6IHRydWUsXG4gIGxvZ2luOiBmYWxzZSxcblxuICAvL21haW5zY3JlZW4uanMgc3R1ZmZcbiAgY2hhdHJvb21MaXN0OiBbXSxcbiAgY2F0ZWdvcnlMaXN0OiBbXSxcbiAgZmlsdGVyQ2hhdHJvb21MaXN0OiBbXSxcblxuICAvL2NoYXRyb29tLmpzXG4gIHNlbnRNZXNzYWdlczogW10sXG4gIHRpdGxlOiAnJyxcbiAgY2F0ZWdvcnk6ICcnLFxuICBjaGF0SWQ6ICcnLFxuICB1c2VySWQ6IDAsXG4gIGlzTWFpblNjcmVlbjogdHJ1ZVxufTsiLCIndXNlIHN0cmljdCc7XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vICAgICAgICBGZXRjaCBGdW5jdGlvbnMgICAgICAgICAgLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKiBhZGQgZGF0YSB0byB0aGUgZGF0YWJhc2UgY2hhdHJvb20gKi9cblxuZnVuY3Rpb24gYWRkVG9EYXRhKGVsZW1lbnQpIHtcbiAgdmFyIG9iaiA9IHtcbiAgICB0aXRsZTogZWxlbWVudC5maW5kKCcjdGl0bGUnKS52YWwoKS50b0xvd2VyQ2FzZSgpLFxuICAgIGNhdGVnb3J5OiBlbGVtZW50LmZpbmQoJyNjYXRlZ29yeScpLnZhbCgpLnRvTG93ZXJDYXNlKClcbiAgfTtcbiAgZWxlbWVudC5maW5kKCcjdGl0bGUnKS52YWwoJycpO1xuICBlbGVtZW50LmZpbmQoJyNjYXRlZ29yeScpLnZhbCgnJyk7XG4gIHZhciB1c2VybmFtZSA9ICdsb2NvNCc7XG4gIHZhciBwYXNzd29yZCA9ICdkYW5jZSc7XG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9qYWJiZXItamFtLmhlcm9rdWFwcC5jb20vY2hhdHJvb21zJywge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIG1vZGU6ICdjb3JzJyxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZClcbiAgICB9KSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvYmopXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgfSk7XG59XG5cbi8qZ2V0dGluZyBjaGF0cm9vbSBkb2N1bWVudHMgZnJvbSBkYXRhYmFzZSovXG5mdW5jdGlvbiBnZXREYXRhQ2hhdHJvb20oKSB7XG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9qYWJiZXItamFtLmhlcm9rdWFwcC5jb20vY2hhdHJvb21zJywge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgbW9kZTogJ2NvcnMnLFxuICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9KVxuICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXNUZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gIH0pO1xufVxuXG4vKmdldHRpbmcgZGlzdGluY3QgY2F0ZWdvcnkgZnJvbSB0aGUgZGF0YWJhc2UqL1xuZnVuY3Rpb24gZ2V0RGF0YUNhdGVnb3J5KCkge1xuICByZXR1cm4gZmV0Y2goJ2h0dHBzOi8vamFiYmVyLWphbS5oZXJva3VhcHAuY29tL2NoYXRyb29tcy9kaXN0aW5jdCcsIHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIG1vZGU6ICdjb3JzJyxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfSlcbiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzVGV4dCk7XG4gICAgfVxuICAgIHJldHVybiByZXMuanNvbigpO1xuICB9KTtcbn1cblxuLypnZXQgY2hhdHJvb20gYnkgaWQgKi9cbmZ1bmN0aW9uIGdldENoYXRyb29tQnlJZChpZCkge1xuICByZXR1cm4gZmV0Y2goJ2h0dHBzOi8vamFiYmVyLWphbS5oZXJva3VhcHAuY29tL2NoYXRyb29tcy8nICsgaWQsIHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIG1vZGU6ICdjb3JzJyxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfSlcbiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzVGV4dCk7XG4gICAgfVxuICAgIHJldHVybiByZXMuanNvbigpO1xuICB9KTtcbn1cblxuLyogdXBkYXRlIG1lc3NhZ2VzIGluIGRiKi9cbmZ1bmN0aW9uIGFkZE1zZ1RvRGIoc3RhdGUsIG1lc3NhZ2UpIHtcbiAgc3RhdGUuc2VudE1lc3NhZ2VzLnB1c2goeyBpZDogc3RhdGUudXNlcklkLCBtZXNzYWdlOiBtZXNzYWdlIH0pO1xuICB2YXIgb2JqZWN0ID0ge1xuICAgIGlkOiBzdGF0ZS5jaGF0SWQsXG4gICAgbWVzc2FnZXM6IHN0YXRlLnNlbnRNZXNzYWdlc1xuICB9O1xuXG4gIHZhciB1c2VybmFtZSA9ICdsb2NvNCc7XG4gIHZhciBwYXNzd29yZCA9ICdkYW5jZSc7XG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9qYWJiZXItamFtLmhlcm9rdWFwcC5jb20vY2hhdHJvb21zLycgKyBzdGF0ZS5jaGF0SWQsIHtcbiAgICBtZXRob2Q6ICdQVVQnLFxuICAgIG1vZGU6ICdjb3JzJyxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZClcbiAgICB9KSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvYmplY3QpXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgfSk7XG59XG5cbi8qdXBkYXRlIHRoZSBjYXRlZ29yeSBpbiB0aGUgREIgKi9cbmZ1bmN0aW9uIGFkZENhdFRvRGIoc3RhdGUsIGNhdGVnb3J5KSB7XG4gIHN0YXRlLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gIHZhciBvYmplY3QgPSB7XG4gICAgaWQ6IHN0YXRlLmNoYXRJZCxcbiAgICBjYXRlZ29yeTogc3RhdGUuY2F0ZWdvcnlcbiAgfTtcblxuICB2YXIgdXNlcm5hbWUgPSAnbG9jbzQnO1xuICB2YXIgcGFzc3dvcmQgPSAnZGFuY2UnO1xuXG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9qYWJiZXItamFtLmhlcm9rdWFwcC5jb20vY2hhdHJvb21zLycgKyBzdGF0ZS5jaGF0SWQsIHtcbiAgICBtZXRob2Q6ICdQVVQnLFxuICAgIG1vZGU6ICdjb3JzJyxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZClcbiAgICB9KSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvYmplY3QpXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgfSk7XG59XG5cbi8qdXBkYXRlIHRoZSB0aXRsZSBpbiB0aGUgREIgKi9cbmZ1bmN0aW9uIGFkZFRpdGxlVG9EYihzdGF0ZSwgdGl0bGUpIHtcbiAgc3RhdGUudGl0bGUgPSB0aXRsZTtcbiAgdmFyIG9iamVjdCA9IHtcbiAgICBpZDogc3RhdGUuY2hhdElkLFxuICAgIHRpdGxlOiBzdGF0ZS50aXRsZVxuICB9O1xuXG4gIHZhciB1c2VybmFtZSA9ICdsb2NvNCc7XG4gIHZhciBwYXNzd29yZCA9ICdkYW5jZSc7XG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9qYWJiZXItamFtLmhlcm9rdWFwcC5jb20vY2hhdHJvb21zLycgKyBzdGF0ZS5jaGF0SWQsIHtcbiAgICBtZXRob2Q6ICdQVVQnLFxuICAgIG1vZGU6ICdjb3JzJyxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZClcbiAgICB9KSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvYmplY3QpXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgfSk7XG59XG5cbi8qRGVsZXRlIHRoZSBjaGF0cm9vbSBmcm9tIHRoZSBkYXRhYmFzZSBhbmRcbiAgZ28gYmFjayB0byB0aGUgbWFpbiBzY3JlZW4gKi9cbmZ1bmN0aW9uIGRlbGV0ZUZyb21EYihzdGF0ZSkge1xuICB2YXIgdXNlcm5hbWUgPSAnbG9jbzQnO1xuICB2YXIgcGFzc3dvcmQgPSAnZGFuY2UnO1xuICByZXR1cm4gZmV0Y2goJ2h0dHBzOi8vamFiYmVyLWphbS5oZXJva3VhcHAuY29tL2NoYXRyb29tcy8nICsgc3RhdGUuY2hhdElkLCB7XG4gICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICBtb2RlOiAnY29ycycsXG4gICAgaGVhZGVyczogbmV3IEhlYWRlcnMoe1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdBdXRob3JpemF0aW9uJzogJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpXG4gICAgfSlcbiAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgYWxlcnQoJ1lvdSBoYXZlIGRlbGV0ZWQgdGhlIGNoYXRyb29tIHdpdGggdGl0bGUgJyArIHN0YXRlLnRpdGxlICsgJyB3aXRoIGNhdGVnb3J5ICcgKyBzdGF0ZS5jYXRlZ29yeSk7XG4gICAgcmVuZGVySGlkZU1haW5TaG93Q2hhdChzdGF0ZSwgJCgnLm1haW5faGlkZV9zaG93JyksICQoJy5zaW5nbGVfY2hhdHJvb20nKSk7XG4gICAgbWFpblNjcmVlbkluaXQoc3RhdGUsICQoJy5saXN0X2NoYXRyb29tJyksICQoJy5jYXRlZ29yeV9saXN0JyksICQoJy5zaW5nbGVfY2hhdHJvb20nKSk7XG4gIH0pO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLyAgICAgICAgICBDb250aW51YXRpb24gd2l0aCB0aGUgRmV0Y2ggRnVuY3Rpb25zICAgICAgIC8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKk1haW4gU2NyZWVuIEluaXQqL1xuZnVuY3Rpb24gbWFpblNjcmVlbkluaXQoc3RhdGUsIGNoYXRyb29tRWxlbWVudCwgY2F0ZWdvcnlFbGVtZW50LCBoaWRlQ2hhdEVsZW1lbnQpIHtcbiAgaGlkZUNoYXRyb29tKGhpZGVDaGF0RWxlbWVudCk7XG4gIFByb21pc2UuYWxsKFtzaG93RGlzdGluY3RDaGF0cm9vbShzdGF0ZSwgY2F0ZWdvcnlFbGVtZW50KSwgc2hvd0ZpbHRlcmVkT3JBbGxDaGF0cm9vbXMoc3RhdGUsIGNoYXRyb29tRWxlbWVudCldKTtcbn1cblxuLyogc2hvdyBhbGwgdGhlIGRpc3RpbmN0IGNhdGVnb3J5ICovXG5mdW5jdGlvbiBzaG93RGlzdGluY3RDaGF0cm9vbShzdGF0ZSwgZWxlbWVudCkge1xuICBnZXREYXRhQ2F0ZWdvcnkoc3RhdGUpLnRoZW4oZnVuY3Rpb24gKHJlc1EpIHtcbiAgICBzdGF0ZS5jYXRlZ29yeUxpc3QgPSByZXNRO1xuICAgIHJlbmRlckNhdGVnb3J5TGlzdChzdGF0ZSwgZWxlbWVudCk7XG4gIH0pO1xufVxuXG4vKiBzaG93IGFsbCBjaGF0cm9vbXMgb3IgZmlsdGVyZWQgY2hhdHJvb20gbGlzdCAqL1xuZnVuY3Rpb24gc2hvd0ZpbHRlcmVkT3JBbGxDaGF0cm9vbXMoc3RhdGUsIGNoYXRyb29tRWxlbWVudCwgY2F0ZWdvcnlFbGVtZW50KSB7XG4gIGdldERhdGFDaGF0cm9vbShzdGF0ZSkudGhlbihmdW5jdGlvbiAocmVzUSkge1xuICAgIHZhciBjaGF0cm9vbUFyciA9IHZvaWQgMDtcbiAgICBpZiAoIWNhdGVnb3J5RWxlbWVudCkge1xuICAgICAgc3RhdGUuY2hhdHJvb21MaXN0ID0gcmVzUTtcbiAgICAgIGNoYXRyb29tQXJyID0gc3RhdGUuY2hhdHJvb21MaXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGF0cm9vbUFyciA9IGZpbHRlckNoYXRyb29tKHN0YXRlLCBjYXRlZ29yeUVsZW1lbnQudGV4dCgpLCByZXNRKTtcbiAgICB9XG4gICAgcmVuZGVyQ2hhdHJvb21MaXN0KHN0YXRlLCBjaGF0cm9vbUVsZW1lbnQsIGNoYXRyb29tQXJyKTtcbiAgfSk7XG59XG5cbi8qSW5pdGlhbGl6ZSB0aGUgY2hhdHJvb20gcGFnZSAqL1xuZnVuY3Rpb24gaW5pdENoYXRyb29tKHN0YXRlLCBlbGVtZW50KSB7XG4gIGdldENoYXRyb29tQnlJZChlbGVtZW50LmF0dHIoJ2RhdGEtaWQnKSkudGhlbihmdW5jdGlvbiAocmVzUSkge1xuICAgIHNldEluaXRpYWxTdGF0ZShzdGF0ZSwgcmVzUSk7XG4gICAgcmVuZGVyQ2hhdHJvb21QYWdlKGFwcFN0YXRlLCAkKCcuY29udmVyc2F0aW9uJyksICQoJy5kZWxldGVfdXBkYXRlJykpO1xuICAgIHJlbmRlckhpZGVNYWluU2hvd0NoYXQoYXBwU3RhdGUsICQoJy5tYWluX2hpZGVfc2hvdycpLCAkKCcuc2luZ2xlX2NoYXRyb29tJykpO1xuICB9KTtcbn1cblxuLypTZXQgdGhlIHVwZGF0ZWQgY2F0ZWdvcnkgdmFsdWUgdG8gdGhlIHN0YXRlIGNhdGVnb3J5IHZhbHVlICovXG5mdW5jdGlvbiBzZXRDYXRWYWx1ZShzdGF0ZSwgc2VudEVsZW1lbnQsIHRpdGxlRWxlbWVudCkge1xuICBhZGRDYXRUb0RiKHN0YXRlLCBzZW50RWxlbWVudC52YWwoKSkudGhlbihmdW5jdGlvbiAocmVzVXBkKSB7XG4gICAgc2V0U3RhdGVUb1VwZENhdChzdGF0ZSwgcmVzVXBkKTtcbiAgICByZW5kZXJVcGRUaXRsZUNhdChzdGF0ZSwgdGl0bGVFbGVtZW50KTtcbiAgfSk7XG59XG5cbi8qU2V0IHRoZSB0aXRsZSBjYXRlZ29yeSB2YWx1ZSB0byB0aGUgdGl0bGUgY2F0ZWdvcnkgdmFsdWUgKi9cbmZ1bmN0aW9uIHNldFRpdGxlVmFsdWUoc3RhdGUsIHNlbnRFbGVtZW50LCB0aXRsZUVsZW1lbnQpIHtcbiAgYWRkVGl0bGVUb0RiKHN0YXRlLCBzZW50RWxlbWVudC52YWwoKSkudGhlbihmdW5jdGlvbiAocmVzVXBkKSB7XG4gICAgc2V0U3RhdGVUb1VwZFRpdGxlKHN0YXRlLCByZXNVcGQpO1xuICAgIHJlbmRlclVwZFRpdGxlQ2F0KHN0YXRlLCB0aXRsZUVsZW1lbnQpO1xuICB9KTtcbn1cblxuLyogYWZ0ZXIgeW91IHNlbmQgdGhlIG1lc3NhZ2UsIHJlbmRlciB0aGUgY2hhdHJvb20gbWVzc2FnZSAqL1xuZnVuY3Rpb24gc2V0VXBkYXRlZE1lc3NhZ2VzKHN0YXRlLCBzZW50VmFsLCBtZXNzYWdlRWxlbWVudCkge1xuICBnZXRDaGF0cm9vbUJ5SWQoc3RhdGUuY2hhdElkKS50aGVuKGZ1bmN0aW9uIChyZXNHZXQpIHtcbiAgICBzZXRTZW50TXNnVG9SZXMoc3RhdGUsIHJlc0dldCk7XG4gICAgcmV0dXJuIGFkZE1zZ1RvRGIoc3RhdGUsIHNlbnRWYWwpO1xuICB9KS50aGVuKGZ1bmN0aW9uIChyZXNVcGQpIHtcbiAgICBzZXRTZW50TXNnVG9SZXMoc3RhdGUsIHJlc1VwZCk7XG4gICAgcmVuZGVyQ2hhdHJvb21NZXNzYWdlcyhzdGF0ZSwgbWVzc2FnZUVsZW1lbnQpO1xuICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgYWxlcnQoJ1RoaXMgY2hhdHJvb20gaGFzIGJlZW4gZGVsZXRlZCcpO1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgcmVuZGVySGlkZU1haW5TaG93Q2hhdChzdGF0ZSwgJCgnLm1haW5faGlkZV9zaG93JyksICQoJy5zaW5nbGVfY2hhdHJvb20nKSk7XG4gICAgbWFpblNjcmVlbkluaXQoc3RhdGUsICQoJy5saXN0X2NoYXRyb29tJyksICQoJy5jYXRlZ29yeV9saXN0JyksICQoJy5zaW5nbGVfY2hhdHJvb20nKSk7XG4gICAgLy8gc3RhdGUuc2VudE1lc3NhZ2VzID0gW107XG4gICAgLy8gc3RhdGUuY2hhdElkID0nJztcbiAgICAvLyByZW5kZXJDaGF0cm9vbVBhZ2Uoc3RhdGUsICQoJy5jb252ZXJzYXRpb24nKSwkKCcuZGVsZXRlX3VwZGF0ZScpKTtcbiAgfSk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8gICAgICAgIFN0YXRlIE1vZGlmaWNhdGlvbiAgICAgICAvLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qZmlsdGVyIGNoYXRyb29tcyovXG5mdW5jdGlvbiBmaWx0ZXJDaGF0cm9vbShzdGF0ZSwgY2F0ZWdvcnksIGFycikge1xuICBzdGF0ZS5jaGF0cm9vbUxpc3QgPSBhcnI7XG4gIHN0YXRlLmZpbHRlckNoYXRyb29tTGlzdCA9IHN0YXRlLmNoYXRyb29tTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG4gICAgcmV0dXJuIGVsLmNhdGVnb3J5ID09PSBjYXRlZ29yeTtcbiAgfSk7XG4gIHJldHVybiBzdGF0ZS5maWx0ZXJDaGF0cm9vbUxpc3Q7XG59XG5cbi8qc2V0IHRoZSBzdGF0ZSB0byB0aGUgaW5pdGFsIGNoYXRyb29tIHBhZ2Ugc3RhdGUgKi9cbmZ1bmN0aW9uIHNldEluaXRpYWxTdGF0ZShzdGF0ZSwgcmVzKSB7XG4gIHN0YXRlLmNoYXRJZCA9IHJlcy5pZDtcbiAgc3RhdGUuc2VudE1lc3NhZ2VzID0gcmVzLm1lc3NhZ2VzO1xuICBzdGF0ZS50aXRsZSA9IHJlcy50aXRsZTtcbiAgc3RhdGUuY2F0ZWdvcnkgPSByZXMuY2F0ZWdvcnk7XG59XG5cbi8qU2V0IHN0YXRlIHNlbnRNZXNzYWdlcyB0byByZXMubWVzc2FnZXMgKi9cbmZ1bmN0aW9uIHNldFNlbnRNc2dUb1JlcyhzdGF0ZSwgcmVzKSB7XG4gIHN0YXRlLnNlbnRNZXNzYWdlcyA9IHJlcy5tZXNzYWdlcztcbn1cblxuLypTZXQgc3RhdGUgVXNlcmlkIHRvIGEgcmFuZG9tIG51bWJlciAodXNlciB0cmFja2VyKSAqL1xuZnVuY3Rpb24gc2V0VXNlcklkKHN0YXRlKSB7XG4gIHN0YXRlLnVzZXJJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7XG59XG5cbi8qU2V0IHN0YXRlIHRpdGxlIHRvIHJlcyB0aXRsZSAqL1xuZnVuY3Rpb24gc2V0U3RhdGVUb1VwZFRpdGxlKHN0YXRlLCByZXMpIHtcbiAgc3RhdGUudGl0bGUgPSByZXMudGl0bGU7XG59XG5cbi8qU2V0IHN0YXRlIGNhdGVnb3J5IHRvIHJlcyBjYXRlZ29yeSAqL1xuZnVuY3Rpb24gc2V0U3RhdGVUb1VwZENhdChzdGF0ZSwgcmVzKSB7XG4gIHN0YXRlLmNhdGVnb3J5ID0gcmVzLmNhdGVnb3J5O1xufVxuXG4vKkNoZWNrcyBpZiB0aGlzIHNjcmVlbiBpcyBtYWluIHNjcmVlbiBvciBub3QgKi9cbmZ1bmN0aW9uIGNoYW5nZVNob3dIaWRlKHN0YXRlKSB7XG4gIHN0YXRlLmlzTWFpblNjcmVlbiA/IHN0YXRlLmlzTWFpblNjcmVlbiA9IGZhbHNlIDogc3RhdGUuaXNNYWluU2NyZWVuID0gdHJ1ZTtcbiAgcmV0dXJuIHN0YXRlO1xufVxuXG4vKlJlc2V0IHN0YXRlKi9cbmZ1bmN0aW9uIHJlc2V0U3RhdGUoc3RhdGUpIHtcbiAgc3RhdGUuY2hhdElkID0gJyc7XG4gIHN0YXRlLnNlbnRNZXNzYWdlcyA9IFtdO1xufVxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLyAgICAgICAgICBSZW5kZXIgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLypyZW5kZXIgdGhlIGxpc3QgdG8gc2hvdyBmaWx0ZXJlZCBjaGF0cm9vbXMgb3IgYWxsIGNoYXRyb29tcyAqL1xuZnVuY3Rpb24gcmVuZGVyQ2hhdHJvb21MaXN0KHN0YXRlLCBjaGF0cm9vbUVsZW1lbnQsIGNoYXRyb29tQXJyKSB7XG4gIHZhciBodG1sU3RyID0gJzxwPkNoYXRyb29tIExpc3Q8L3A+XFxuICAgICAgICAgIDx1bD4nO1xuICB2YXIgbWFwcGVkQ2hhdCA9IGNoYXRyb29tQXJyLm1hcChmdW5jdGlvbiAoZWwpIHtcbiAgICByZXR1cm4gJzxsaSBkYXRhLWlkPScgKyBlbC5pZCArICc+JyArIGVsLnRpdGxlICsgJzwvbGk+JztcbiAgfSkuam9pbignXFxuXFx0Jyk7XG4gIGh0bWxTdHIgKz0gbWFwcGVkQ2hhdCArICc8L3VsPic7XG4gIGNoYXRyb29tRWxlbWVudC5odG1sKGh0bWxTdHIpO1xufVxuXG4vKiByZW5kZXJzIHRoZSBkaXN0aW5jdCBjYXRlZ29yeSAqL1xuZnVuY3Rpb24gcmVuZGVyQ2F0ZWdvcnlMaXN0KHN0YXRlLCBlbGVtZW50KSB7XG4gIHZhciBodG1sU3RyID0gJzxwPkNhdGVnb3JpZXM8L3A+XFxuICAgICAgICA8dWw+JztcbiAgdmFyIG1hcHBlZENhdGVnb3J5ID0gc3RhdGUuY2F0ZWdvcnlMaXN0Lm1hcChmdW5jdGlvbiAoZWwpIHtcbiAgICByZXR1cm4gJzxsaT4nICsgZWwgKyAnPC9saT4nO1xuICB9KS5qb2luKCdcXG5cXHQnKTtcbiAgaHRtbFN0ciArPSBtYXBwZWRDYXRlZ29yeSArICc8L3VsPic7XG4gIGVsZW1lbnQuaHRtbChodG1sU3RyKTtcbn1cblxuLypoaWRlIGFuZCBzaG93IHNjcmVlbnMgKi9cbmZ1bmN0aW9uIHJlbmRlckhpZGVNYWluU2hvd0NoYXQoc3RhdGUsIG1haW5FbGVtZW50LCBzaG93RWxlbWVudCkge1xuICBpZiAoc3RhdGUuaXNNYWluU2NyZWVuKSB7XG4gICAgY2hhbmdlU2hvd0hpZGUoc3RhdGUpO1xuICAgIG1haW5FbGVtZW50LmhpZGUoKTtcbiAgICBzaG93RWxlbWVudC5zaG93KCk7XG4gIH0gZWxzZSB7XG4gICAgY2hhbmdlU2hvd0hpZGUoc3RhdGUpO1xuICAgIG1haW5FbGVtZW50LnNob3coKTtcbiAgICBzaG93RWxlbWVudC5oaWRlKCk7XG4gIH1cbn1cblxuLypoaWRlcyBjaGF0cm9vbSBzY3JlZW4qL1xuZnVuY3Rpb24gaGlkZUNoYXRyb29tKGVsZW1lbnQpIHtcbiAgZWxlbWVudC5oaWRlKCk7XG59XG5cbi8qSW5pdGlhbCBjaGF0cm9vbSBtZXNzYWdlcyAqL1xuZnVuY3Rpb24gcmVuZGVyQ2hhdHJvb21QYWdlKHN0YXRlLCBtc2dFbGVtZW50LCB0aXRsZUNhdEVsZW1lbnQpIHtcbiAgcmVuZGVyQ2hhdHJvb21NZXNzYWdlcyhzdGF0ZSwgbXNnRWxlbWVudCk7XG4gIHJlbmRlclVwZFRpdGxlQ2F0KHN0YXRlLCB0aXRsZUNhdEVsZW1lbnQpO1xufVxuXG4vKnJlbmRlciBjaGF0cm9vbSBtZXNzYWdlcyAqL1xuZnVuY3Rpb24gcmVuZGVyQ2hhdHJvb21NZXNzYWdlcyhzdGF0ZSwgbWVzc2FnZUVsZW1lbnQpIHtcbiAgdmFyIG1zZyA9IHZvaWQgMDtcbiAgaWYgKHN0YXRlLnNlbnRNZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgbXNnID0gc3RhdGUuc2VudE1lc3NhZ2VzLm1hcChmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHJldHVybiAnPGxpPicgKyBlbC5pZCArICc6ICcgKyBlbC5tZXNzYWdlICsgJzwvbGk+JztcbiAgICB9KS5qb2luKCdcXG4nKTtcbiAgfVxuICBtZXNzYWdlRWxlbWVudC5odG1sKG1zZyk7XG59XG5cbi8qcmVuZGVyaW5nIHRoZSB1cGRhdGVkIHRpdGxlIGFuZCBjYXQqL1xuZnVuY3Rpb24gcmVuZGVyVXBkVGl0bGVDYXQoc3RhdGUsIHRpdGxlQ2F0RWxlbWVudCkge1xuICB2YXIgaHRtbFN0ciA9ICdcXG4gICAgICAgIDx1bD5cXG4gICAgICAgICAgPGxpIGNsYXNzID1cInVwZFRcIj4nICsgc3RhdGUudGl0bGUgKyAnPC9saT5cXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ1cGRhdGVUaXRsZVwiIG5hbWU9XCJ1cGRhdGVUaXRsZVwiIHBsYWNlaG9sZGVyPVwiQ2hhbmdlIFRpdGxlXCI+XFxuICAgICAgICAgIDxsaSBjbGFzcyA9IFwidXBkQ2F0XCI+JyArIHN0YXRlLmNhdGVnb3J5ICsgJzwvbGk+XFxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidXBkYXRlQ2F0XCIgbmFtZT1cInVwZGF0ZUNhdFwiIHBsYWNlaG9sZGVyPVwiQ2hhbmdlIENhdGVnb3J5XCI+XFxuICAgICAgICAgIDxsaSBjbGFzcyA9IFwiZGVsZXRlQ2hhdFwiPkRlbGV0ZSBDaGF0cm9vbTwvbGk+XFxuICAgICAgICA8L3VsPic7XG4gIHRpdGxlQ2F0RWxlbWVudC5odG1sKGh0bWxTdHIpO1xufVxuXG4vKnJlbmRlcmluZyB0aGUgbmF2IGJhciBzbyB1c2VybmFtZSBzaG93cyAqL1xuZnVuY3Rpb24gcmVuZGVyTmF2QmFyKHN0YXRlLCBlbGVtZW50KSB7XG4gIHZhciBtZXNzYWdlID0gJ1xcbiAgICAgIDxsaSBjbGFzcz1cIm5hdl9lbFwiPjxhIGhyZWY9XCJtYWluU2NyZWVuLmh0bWxcIiBjbGFzcz1cImhvbWVcIj5KYWJiZXIgSmFtPC9hPjwvbGk+XFxuICAgICAgPGxpIGNsYXNzPVwibmF2X3VzZXJcIj48cCBjbGFzcz1cInVzZXJuYW1lXCI+JyArIHN0YXRlLnVzZXJJZCArICc8L3A+PC9saT4nO1xuICBlbGVtZW50Lmh0bWwobWVzc2FnZSk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8gICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAvLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qIGNyZWF0ZXMgYSBjaGF0IHJvb20gaW4gdGhlIGRhdGFiYXNlICovXG5mdW5jdGlvbiBjcmVhdGVDaGF0cm9vbShzdGF0ZSkge1xuICAkKCcuY2hhdHJvb21fZm9ybScpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGFkZFRvRGF0YSgkKCcuY2hhdHJvb21fZm9ybScpKS50aGVuKGZ1bmN0aW9uIChyZXNRKSB7XG4gICAgICBhbGVydCgnWW91IGhhdmUgY3JlYXRlZCB0aGUgY2hhdHJvb20gd2l0aCB0aGUgdGl0bGUgJyArIHJlc1EudGl0bGUgKyAnIGFuZCBjYXRlZ29yeSAnICsgcmVzUS5jYXRlZ29yeSk7XG4gICAgICBtYWluU2NyZWVuSW5pdChzdGF0ZSwgJCgnLmxpc3RfY2hhdHJvb20nKSwgJCgnLmNhdGVnb3J5X2xpc3QnKSwgJCgnLnNpbmdsZV9jaGF0cm9vbScpKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qIFNob3cgZmlsdGVyIGNoYXRyb29tcyAqL1xuZnVuY3Rpb24gc2hvd0ZpbHRlckNoYXRyb29tKHN0YXRlKSB7XG4gICQoJy5jYXRlZ29yeV9saXN0Jykub24oJ2NsaWNrJywgJ2xpJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgc2hvd0ZpbHRlcmVkT3JBbGxDaGF0cm9vbXMoc3RhdGUsICQoJy5saXN0X2NoYXRyb29tJyksICQodGhpcykpO1xuICB9KTtcbn1cblxuLypzaG93IGFsbCBjaGF0cm9vbXMgKi9cbmZ1bmN0aW9uIHNob3dBbGxDaGF0cm9vbXMoc3RhdGUpIHtcbiAgJCgnLmNhdGVnb3J5X2xpc3QnKS5vbignY2xpY2snLCAncCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHNob3dGaWx0ZXJlZE9yQWxsQ2hhdHJvb21zKHN0YXRlLCAkKCcubGlzdF9jaGF0cm9vbScpKTtcbiAgfSk7XG59XG5cbi8qaGlkZSBtYWluc2NyZWVuICovXG5mdW5jdGlvbiBoaWRlTWFpblNjcmVlbihzdGF0ZSkge1xuICAkKCcubGlzdF9jaGF0cm9vbScpLm9uKCdjbGljaycsICdsaScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGluaXRDaGF0cm9vbShzdGF0ZSwgJCh0aGlzKSk7XG4gIH0pO1xufVxuXG4vKnVwZGF0ZSB0aGUgY2hhdHJvb20gbWVzc2FnZSBvbmNlIHlvdSBjbGljayAqL1xuZnVuY3Rpb24gdXBkQ2hhdHJvb21Nc2dDbGljayhzdGF0ZSkge1xuICAkKCcubWVzc2FnZXMnKS5vbignY2xpY2snLCAnI2J1dHRvbicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2V0VXBkYXRlZE1lc3NhZ2VzKHN0YXRlLCAkKCcjdGV4dCcpLnZhbCgpLCAkKCcuY29udmVyc2F0aW9uJykpO1xuICAgICQoJyN0ZXh0JykudmFsKCcnKTtcbiAgfSk7XG59XG5cbi8qdXBkYXRlIHRoZSBjaGF0cm9vbSBtZXNzYWdlIG9uY2UgeW91IHByZXNzIGVudGVyIGtleSAqL1xuZnVuY3Rpb24gdXBkQ2hhdHJvb21Nc2dFbnRlcihzdGF0ZSkge1xuICAkKCcubWVzc2FnZXMnKS5vbigna2V5cHJlc3MnLCAnI3RleHQnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBrZXkgPSBlLndoaWNoO1xuICAgIGlmIChrZXkgPT09IDEzKSAvLyB0aGUgZW50ZXIga2V5IGNvZGVcbiAgICAgIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2V0VXBkYXRlZE1lc3NhZ2VzKHN0YXRlLCAkKCcjdGV4dCcpLnZhbCgpLCAkKCcuY29udmVyc2F0aW9uJykpO1xuICAgICAgICAkKCcjdGV4dCcpLnZhbCgnJyk7XG4gICAgICB9XG4gIH0pO1xufVxuXG4vKnVwZGF0ZSB0aGUgdGl0bGUgb25jZSB5b3UgcHJlc3MgZW50ZXIga2V5ICovXG5mdW5jdGlvbiB1cGRUaXRsZUVudGVyKHN0YXRlKSB7XG4gICQoJy5kZWxldGVfdXBkYXRlJykub24oJ2tleXByZXNzJywgJyN1cGRhdGVUaXRsZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGtleSA9IGUud2hpY2g7XG4gICAgaWYgKGtleSA9PT0gMTMpIC8vIHRoZSBlbnRlciBrZXkgY29kZVxuICAgICAge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzZXRUaXRsZVZhbHVlKHN0YXRlLCAkKCcjdXBkYXRlVGl0bGUnKSwgJCgnLmRlbGV0ZV91cGRhdGUnKSk7XG4gICAgICAgICQoJyN1cGRhdGVUaXRsZScpLnZhbCgnJyk7XG4gICAgICB9XG4gIH0pO1xufVxuXG4vKnVwZGF0ZSB0aGUgY2F0ZWdvcnkgb25jZSB5b3UgcHJlc3MgZW50ZXIga2V5ICovXG5mdW5jdGlvbiB1cGRDYXRFbnRlcihzdGF0ZSkge1xuICAkKCcuZGVsZXRlX3VwZGF0ZScpLm9uKCdrZXlwcmVzcycsICcjdXBkYXRlQ2F0JywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIga2V5ID0gZS53aGljaDtcbiAgICBpZiAoa2V5ID09PSAxMykgLy8gdGhlIGVudGVyIGtleSBjb2RlXG4gICAgICB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNldENhdFZhbHVlKHN0YXRlLCAkKCcjdXBkYXRlQ2F0JyksICQoJy5kZWxldGVfdXBkYXRlJykpO1xuICAgICAgICAkKCcjdXBkYXRlQ2F0JykudmFsKCcnKTtcbiAgICAgIH1cbiAgfSk7XG59XG5cbi8qRGVsZXRlIENoYXRyb29tICovXG5mdW5jdGlvbiBkZWxDaGF0cm9vbShzdGF0ZSkge1xuICAkKCcuZGVsZXRlX3VwZGF0ZScpLm9uKCdjbGljaycsICcuZGVsZXRlQ2hhdCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGRlbGV0ZUZyb21EYihzdGF0ZSk7XG4gIH0pO1xufVxuXG4vKmdvIGJhY2sgdG8gbWFpbiBzY3JlZW4gKi9cbmZ1bmN0aW9uIGdvQmFja1RvTWFpbihzdGF0ZSkge1xuICAkKCcuZ29fYmFja190b19tYWluJykub24oJ2NsaWNrJywgJ3AnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZW5kZXJIaWRlTWFpblNob3dDaGF0KHN0YXRlLCAkKCcubWFpbl9oaWRlX3Nob3cnKSwgJCgnLnNpbmdsZV9jaGF0cm9vbScpKTtcbiAgICBtYWluU2NyZWVuSW5pdChzdGF0ZSwgJCgnLmxpc3RfY2hhdHJvb20nKSwgJCgnLmNhdGVnb3J5X2xpc3QnKSwgJCgnLnNpbmdsZV9jaGF0cm9vbScpKTtcbiAgICAvLyBzdGF0ZS5zZW50TWVzc2FnZXMgPSBbXTtcbiAgICAvLyBzdGF0ZS5jaGF0SWQgPScnO1xuICAgIC8vIHJlbmRlckNoYXRyb29tUGFnZShzdGF0ZSwgJCgnLmNvbnZlcnNhdGlvbicpLCQoJy5kZWxldGVfdXBkYXRlJykpO1xuICB9KTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLyAgICAgR3JvdXBpbmcgRXZlbnRMaXN0ZW5lcnMgICAgIC8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLypJbml0aWFsaXplIHRoZSBwYWdlICovXG5mdW5jdGlvbiBpbml0UGFnZShzdGF0ZSkge1xuICByZW5kZXJOYXZCYXIoc3RhdGUsICQoJy5uYXZfYmFyJykpO1xuICBtYWluU2NyZWVuSW5pdChzdGF0ZSwgJCgnLmxpc3RfY2hhdHJvb20nKSwgJCgnLmNhdGVnb3J5X2xpc3QnKSwgJCgnLnNpbmdsZV9jaGF0cm9vbScpKTtcbn1cblxuLypTdG9yZXMgYWxsIHRoZSBmaWx0ZXIgb3IgYWxsIGNoYXRyb29tcyBmdW5jdGlvbnMgKi9cbmZ1bmN0aW9uIGNhdGVnb3J5TGlzdFN0b3JhZ2Uoc3RhdGUpIHtcbiAgc2hvd0ZpbHRlckNoYXRyb29tKHN0YXRlKTtcbiAgc2hvd0FsbENoYXRyb29tcyhzdGF0ZSk7XG59XG5cbi8qIFN0b3JlcyBhbGwgdGhlIHVwZGF0ZSBmdW5jdGlvbnMgKi9cbmZ1bmN0aW9uIHVwZGF0ZVN0b3JhZ2Uoc3RhdGUpIHtcbiAgdXBkQ2hhdHJvb21Nc2dDbGljayhzdGF0ZSk7XG4gIHVwZENoYXRyb29tTXNnRW50ZXIoc3RhdGUpO1xuICB1cGRUaXRsZUVudGVyKHN0YXRlKTtcbiAgdXBkQ2F0RW50ZXIoc3RhdGUpO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vICAgICAgICAgIENhbGxiYWNrIEZ1bmN0aW9uICAgICAgLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKiBDYWxsYmFjayBmdW5jdGlvbiBhZnRlciBET00gaXMgcmVhZHkgKi9cbiQoZnVuY3Rpb24gKCkge1xuICBzZXRVc2VySWQoYXBwU3RhdGUpO1xuICBpbml0UGFnZShhcHBTdGF0ZSk7XG4gIGNyZWF0ZUNoYXRyb29tKGFwcFN0YXRlKTtcbiAgY2F0ZWdvcnlMaXN0U3RvcmFnZShhcHBTdGF0ZSk7XG4gIGhpZGVNYWluU2NyZWVuKGFwcFN0YXRlKTtcbiAgdXBkYXRlU3RvcmFnZShhcHBTdGF0ZSk7XG4gIGRlbENoYXRyb29tKGFwcFN0YXRlKTtcbiAgZ29CYWNrVG9NYWluKGFwcFN0YXRlKTtcbiAgcmVzZXRTdGF0ZShhcHBTdGF0ZSk7XG59KTsiLCIndXNlIHN0cmljdCc7XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vICAgICAgICBTdGF0ZSBNb2RpZmljYXRpb24gICAgLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKkNoYW5nZXMgTG9nIEluIGJvb2wqL1xuXG5mdW5jdGlvbiBjaGFuZ2VUb0xvZ2luQm9vbChzdGF0ZSkge1xuICBzdGF0ZS5sb2dpbiA9IHRydWU7XG4gIHN0YXRlLnNpZ25VcCA9IGZhbHNlO1xuICByZXR1cm4gc3RhdGU7XG59XG5cbi8qQ2hhbmdlcyBTaWduIFVwIEJvb2wgKi9cbmZ1bmN0aW9uIGNoYW5nZVRvU2lnblVwQm9vbChzdGF0ZSkge1xuICBzdGF0ZS5sb2dpbiA9IGZhbHNlO1xuICBzdGF0ZS5zaWduVXAgPSB0cnVlO1xuICByZXR1cm4gc3RhdGU7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8gICAgICAgIEhlbHBlciBGdW5jdGlvbnMgICAgICAvLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qU3RvcmUgVXNlciBTaWduIFVwIHZhbHVlcyAqL1xuZnVuY3Rpb24gc3RvcmVVc2VyU2lnblVwSW5mbygpIHtcbiAgdmFyIHVzZXIgPSB7XG4gICAgdXNlcm5hbWU6ICQoJyN1c2VybmFtZScpLnZhbCgpLFxuICAgIHBhc3N3b3JkOiAkKCcjcGFzc3dvcmQnKS52YWwoKSxcbiAgICBmaXJzdE5hbWU6ICQoJyNmaXJzdC1uYW1lJykudmFsKCksXG4gICAgbGFzdE5hbWU6ICQoJyNsYXN0LW5hbWUnKS52YWwoKSxcbiAgICBlbWFpbDogJCgnI2VtYWlsJykudmFsKClcbiAgfTtcbiAgcmV0dXJuIHVzZXI7XG59XG5cbi8qU3RvcmUgVXNlciBMb2dpbiB2YWx1ZXMgKi9cbmZ1bmN0aW9uIHN0b3JlVXNlckxvZ2luSW5mbygpIHtcbiAgdmFyIHVzZXIgPSB7XG4gICAgdXNlcm5hbWU6ICQoJyN1c2VybmFtZScpLnZhbCgpLFxuICAgIHBhc3N3b3JkOiAkKCcjcGFzc3dvcmQnKS52YWwoKVxuICB9O1xuICByZXR1cm4gdXNlcjtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLyAgICAgICAgRmV0Y2ggICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLypGZXRjaCBjYWxsIGZvciBhZGRpbmcgdXNlciBpbnRvIHRoZSBkYXRhYmFzZSovXG5mdW5jdGlvbiBhZGRVc2VyKHVzZXIpIHtcbiAgcmV0dXJuIGZldGNoKCcvdXNlcnMnLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVzZXIpXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgfSk7XG59XG5cbi8qRmV0Y2ggY2FsbCBmb3IgY2hlY2tpbmcgdGhlIHVzZXIgaXMgY29ycmVjdCAqL1xuZnVuY3Rpb24gY2hlY2tVc2VyKHVzZXIpIHtcbiAgcmV0dXJuIGZldGNoKCcvdXNlcnMnLCB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSlcbiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuc3RhdHVzVGV4dCk7XG4gICAgfVxuICAgIHJldHVybiByZXMuanNvbigpO1xuICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLyAgICAgICAgICBSZW5kZXIgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLyogUmVuZGVycyB0aGUgbG9naW4gYW5kIHNpZ251cCBmb3JtKi9cbmZ1bmN0aW9uIHJlbmRlcihzdGF0ZSwgZWxlbWVudCkge1xuICB2YXIgZm9ybVN0ciA9IHZvaWQgMDtcbiAgaWYgKHN0YXRlLnNpZ25VcCAmJiBzdGF0ZS5sb2dpbiA9PT0gZmFsc2UpIHtcbiAgICBmb3JtU3RyID0gJ1xcbiAgICA8Zm9ybSBjbGFzcz1cInNpZ251cF9mb3JtXCJhY3Rpb249XCJpbmRleC5odG1sXCI+XFxuICAgICAgICA8ZmllbGRzZXQgbmFtZT1cInNpZ251cFwiPlxcbiAgICAgICAgICA8bGVnZW5kIGNsYXNzPVwic2lnbnVwX2xlZ2VuZFwiPlNpZ24gVXA8L2xlZ2VuZD5cXG4gICAgICAgICAgPGxhYmVsIGZvcj1cImZpcnN0LW5hbWVcIj5GaXJzdCBOYW1lPC9sYWJlbD5cXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJDaHJpc1wiIGlkPVwiZmlyc3QtbmFtZVwiIG5hbWU9XCJmaXJzdC1uYW1lXCIvPlxcbiAgICAgICAgICA8bGFiZWwgZm9yPVwibGFzdC1uYW1lXCI+TGFzdCBOYW1lPC9sYWJlbD5cXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJLbGFuYWNcIiBpZD1cImxhc3QtbmFtZVwiIG5hbWU9XCJsYXN0LW5hbWVcIi8+XFxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJ1c2VybmFtZVwiPlVzZXJuYW1lPC9sYWJlbD5cXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJoaUNocmlzXCIgaWQ9XCJ1c2VybmFtZVwiIG5hbWU9XCJ1c2VybmFtZVwiIHJlcXVpcmVkLz5cXG4gICAgICAgICAgPGxhYmVsIGZvcj1cInBhc3N3b3JkXCI+UGFzc3dvcmQ8L2xhYmVsPlxcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInBhc3N3b3JkXCIgcGxhY2Vob2xkZXI9XCJwYXNzd29yZFwiIGlkPVwicGFzc3dvcmRcIiBuYW1lPVwicGFzc3dvcmRcIiByZXF1aXJlZC8+XFxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJlbWFpbFwiPkVtYWlsPC9sYWJlbD5cXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJlbWFpbFwiIHBsYWNlaG9sZGVyPVwiaGlDaHJpc0BnbWFpbC5jb21cIiBpZD1cImVtYWlsXCIgbmFtZT1cImVtYWlsXCIgcmVxdWlyZWQvPlxcbiAgICAgICAgPC9maWVsZHNldD5cXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJqcy1jaGFuZ2UtbG9naW5cIiB0eXBlPVxcJ3N1Ym1pdFxcJz5TaWduIFVwPC9idXR0b24+XFxuICAgICAgPC9mb3JtPic7XG4gIH0gZWxzZSBpZiAoc3RhdGUubG9naW4gJiYgc3RhdGUuc2lnblVwID09PSBmYWxzZSkge1xuICAgIGZvcm1TdHIgPSAnXFxuICAgICAgPGZvcm0gY2xhc3M9XCJsb2dpbl9mb3JtXCIgYWN0aW9uPVwibWFpblNjcmVlbi5odG1sXCI+XFxuICAgICAgICA8ZmllbGRzZXQgbmFtZT1cImxvZ2luXCI+XFxuICAgICAgICAgIDxsZWdlbmQgY2xhc3M9XCJsb2dpbl9sZWdlbmRcIj5Mb2dpbjwvbGVnZW5kPlxcbiAgICAgICAgICA8bGFiZWwgZm9yPVwidXNlcm5hbWVcIj5Vc2VybmFtZTwvbGFiZWw+XFxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiaGlDaHJpc1wiIGlkPVwidXNlcm5hbWVcIiBuYW1lPVwidXNlcm5hbWVcIiByZXF1aXJlZC8+XFxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJwYXNzd29yZFwiPlBhc3N3b3JkPC9sYWJlbD5cXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwicGFzc3dvcmRcIiBpZD1cInBhc3N3b3JkXCIgbmFtZT1cInBhc3N3b3JkXCIgcmVxdWlyZWQvPlxcbiAgICAgICAgPC9maWVsZHNldD5cXG4gICAgICAgIDxidXR0b24gaWQ9XFwnbG9nSW5cXCcgdHlwZT1cXCdzdWJtaXRcXCc+TG9naW48L2J1dHRvbj5cXG4gICAgICA8L2Zvcm0+JztcbiAgfVxuICBlbGVtZW50Lmh0bWwoZm9ybVN0cik7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8gICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAvLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qRXZlbnQgTGlzdGVuZXIgZm9yIHRoZSBMb2cgSW4gb24gdGhlIG5hdiBiYXIgKi9cbmZ1bmN0aW9uIGNoYW5nZVRvTG9naW4oc3RhdGUpIHtcbiAgJCgnLmxvZ2luJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY2hhbmdlVG9Mb2dpbkJvb2woc3RhdGUpO1xuICAgIHJlbmRlcihzdGF0ZSwgJCgnLmNvbnRhaW5lcicpKTtcbiAgfSk7XG59XG5cbi8qRXZlbnQgTGlzdGVuZXIgZm9yIHRoZSBTaWduIFVwIG9uIHRoZSBuYXYgYmFyICovXG5mdW5jdGlvbiBjaGFuZ2VUb1NpZ25VcChzdGF0ZSkge1xuICAkKCcuc2lnbnVwJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY2hhbmdlVG9TaWduVXBCb29sKHN0YXRlKTtcbiAgICByZW5kZXIoc3RhdGUsICQoJy5jb250YWluZXInKSk7XG4gIH0pO1xufVxuXG4vKkV2ZW50IExpc3RlbmVyIGZvciB0aGUgY2hhbmdpbmcgdG8gbG9naW4gc2NyZWVuIGFmdGVyIHNpZ24gdXAgKi9cbmZ1bmN0aW9uIGNMb2dpbkFmdGVyU2lnblVwKHN0YXRlKSB7XG4gICQoJy5jb250YWluZXInKS5vbignY2xpY2snLCAnLmpzLWNoYW5nZS1sb2dpbicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2hhbmdlVG9Mb2dpbkJvb2woc3RhdGUpO1xuICAgIHZhciB1c2VyID0gc3RvcmVVc2VyU2lnblVwSW5mbygpO1xuICAgIGFkZFVzZXIodXNlcik7XG4gICAgcmVuZGVyKHN0YXRlLCAkKCcuY29udGFpbmVyJykpO1xuICB9KTtcbn1cblxuLypFdmVudCBMaXN0ZW5lciBzdWJtaXR0aW5nIHRoZSBmb3JtIGFuZCBjaGFuZ2luZyBpdCB0byBtYWluc2NyZWVuICovXG5mdW5jdGlvbiBsb2dnaW5nSW4oc3RhdGUpIHtcbiAgJCgnLmNvbnRhaW5lcicpLm9uKCdzdWJtaXQnLCAnLmxvZ2luX2Zvcm0nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciB1c2VyID0gc3RvcmVVc2VyTG9naW5JbmZvKCk7XG4gICAgY2hlY2tVc2VyKHVzZXIpO1xuICAgIHJlbmRlcihzdGF0ZSwgJCgnLmNvbnRhaW5lcicpKTtcbiAgfSk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8gICAgICAgICAgQ2FsbGJhY2sgRnVuY3Rpb24gICAgICAvLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qIENhbGxiYWNrIGZ1bmN0aW9uIGFmdGVyIERPTSBpcyByZWFkeSAqL1xuJChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgcmVuZGVyKGFwcFN0YXRlLCAkKCcuY29udGFpbmVyJykpO1xuICBjaGFuZ2VUb0xvZ2luKGFwcFN0YXRlKTtcbiAgY2hhbmdlVG9TaWduVXAoYXBwU3RhdGUpO1xuICBjTG9naW5BZnRlclNpZ25VcChhcHBTdGF0ZSk7XG4gIGxvZ2dpbmdJbihhcHBTdGF0ZSk7XG59KTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG4oZnVuY3Rpb24gKHIpIHtcbiAgaWYgKCh0eXBlb2YgZXhwb3J0cyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSByKCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIHIpO1xuICB9IGVsc2Uge1xuICAgIHZhciBlO2lmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBlID0gd2luZG93O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZSA9IGdsb2JhbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBlID0gc2VsZjtcbiAgICB9IGVsc2Uge1xuICAgICAgZSA9IHRoaXM7XG4gICAgfWUuYmFzZTY0anMgPSByKCk7XG4gIH1cbn0pKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHIsIGUsIHQ7cmV0dXJuIGZ1bmN0aW9uIHIoZSwgdCwgbikge1xuICAgIGZ1bmN0aW9uIG8oaSwgYSkge1xuICAgICAgaWYgKCF0W2ldKSB7XG4gICAgICAgIGlmICghZVtpXSkge1xuICAgICAgICAgIHZhciB1ID0gdHlwZW9mIHJlcXVpcmUgPT0gXCJmdW5jdGlvblwiICYmIHJlcXVpcmU7aWYgKCFhICYmIHUpIHJldHVybiB1KGksICEwKTtpZiAoZikgcmV0dXJuIGYoaSwgITApO3ZhciBkID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIGkgKyBcIidcIik7dGhyb3cgZC5jb2RlID0gXCJNT0RVTEVfTk9UX0ZPVU5EXCIsIGQ7XG4gICAgICAgIH12YXIgYyA9IHRbaV0gPSB7IGV4cG9ydHM6IHt9IH07ZVtpXVswXS5jYWxsKGMuZXhwb3J0cywgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICB2YXIgdCA9IGVbaV1bMV1bcl07cmV0dXJuIG8odCA/IHQgOiByKTtcbiAgICAgICAgfSwgYywgYy5leHBvcnRzLCByLCBlLCB0LCBuKTtcbiAgICAgIH1yZXR1cm4gdFtpXS5leHBvcnRzO1xuICAgIH12YXIgZiA9IHR5cGVvZiByZXF1aXJlID09IFwiZnVuY3Rpb25cIiAmJiByZXF1aXJlO2ZvciAodmFyIGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykge1xuICAgICAgbyhuW2ldKTtcbiAgICB9cmV0dXJuIG87XG4gIH0oeyBcIi9cIjogW2Z1bmN0aW9uIChyLCBlLCB0KSB7XG4gICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgIHQuYnl0ZUxlbmd0aCA9IGM7dC50b0J5dGVBcnJheSA9IHY7dC5mcm9tQnl0ZUFycmF5ID0gczt2YXIgbiA9IFtdO3ZhciBvID0gW107dmFyIGYgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gXCJ1bmRlZmluZWRcIiA/IFVpbnQ4QXJyYXkgOiBBcnJheTt2YXIgaSA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiO2ZvciAodmFyIGEgPSAwLCB1ID0gaS5sZW5ndGg7IGEgPCB1OyArK2EpIHtcbiAgICAgICAgblthXSA9IGlbYV07b1tpLmNoYXJDb2RlQXQoYSldID0gYTtcbiAgICAgIH1vW1wiLVwiLmNoYXJDb2RlQXQoMCldID0gNjI7b1tcIl9cIi5jaGFyQ29kZUF0KDApXSA9IDYzO2Z1bmN0aW9uIGQocikge1xuICAgICAgICB2YXIgZSA9IHIubGVuZ3RoO2lmIChlICUgNCA+IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpO1xuICAgICAgICB9cmV0dXJuIHJbZSAtIDJdID09PSBcIj1cIiA/IDIgOiByW2UgLSAxXSA9PT0gXCI9XCIgPyAxIDogMDtcbiAgICAgIH1mdW5jdGlvbiBjKHIpIHtcbiAgICAgICAgcmV0dXJuIHIubGVuZ3RoICogMyAvIDQgLSBkKHIpO1xuICAgICAgfWZ1bmN0aW9uIHYocikge1xuICAgICAgICB2YXIgZSwgdCwgbiwgaSwgYSwgdTt2YXIgYyA9IHIubGVuZ3RoO2EgPSBkKHIpO3UgPSBuZXcgZihjICogMyAvIDQgLSBhKTtuID0gYSA+IDAgPyBjIC0gNCA6IGM7dmFyIHYgPSAwO2ZvciAoZSA9IDAsIHQgPSAwOyBlIDwgbjsgZSArPSA0LCB0ICs9IDMpIHtcbiAgICAgICAgICBpID0gb1tyLmNoYXJDb2RlQXQoZSldIDw8IDE4IHwgb1tyLmNoYXJDb2RlQXQoZSArIDEpXSA8PCAxMiB8IG9bci5jaGFyQ29kZUF0KGUgKyAyKV0gPDwgNiB8IG9bci5jaGFyQ29kZUF0KGUgKyAzKV07dVt2KytdID0gaSA+PiAxNiAmIDI1NTt1W3YrK10gPSBpID4+IDggJiAyNTU7dVt2KytdID0gaSAmIDI1NTtcbiAgICAgICAgfWlmIChhID09PSAyKSB7XG4gICAgICAgICAgaSA9IG9bci5jaGFyQ29kZUF0KGUpXSA8PCAyIHwgb1tyLmNoYXJDb2RlQXQoZSArIDEpXSA+PiA0O3VbdisrXSA9IGkgJiAyNTU7XG4gICAgICAgIH0gZWxzZSBpZiAoYSA9PT0gMSkge1xuICAgICAgICAgIGkgPSBvW3IuY2hhckNvZGVBdChlKV0gPDwgMTAgfCBvW3IuY2hhckNvZGVBdChlICsgMSldIDw8IDQgfCBvW3IuY2hhckNvZGVBdChlICsgMildID4+IDI7dVt2KytdID0gaSA+PiA4ICYgMjU1O3VbdisrXSA9IGkgJiAyNTU7XG4gICAgICAgIH1yZXR1cm4gdTtcbiAgICAgIH1mdW5jdGlvbiBsKHIpIHtcbiAgICAgICAgcmV0dXJuIG5bciA+PiAxOCAmIDYzXSArIG5bciA+PiAxMiAmIDYzXSArIG5bciA+PiA2ICYgNjNdICsgbltyICYgNjNdO1xuICAgICAgfWZ1bmN0aW9uIGgociwgZSwgdCkge1xuICAgICAgICB2YXIgbjt2YXIgbyA9IFtdO2ZvciAodmFyIGYgPSBlOyBmIDwgdDsgZiArPSAzKSB7XG4gICAgICAgICAgbiA9IChyW2ZdIDw8IDE2KSArIChyW2YgKyAxXSA8PCA4KSArIHJbZiArIDJdO28ucHVzaChsKG4pKTtcbiAgICAgICAgfXJldHVybiBvLmpvaW4oXCJcIik7XG4gICAgICB9ZnVuY3Rpb24gcyhyKSB7XG4gICAgICAgIHZhciBlO3ZhciB0ID0gci5sZW5ndGg7dmFyIG8gPSB0ICUgMzt2YXIgZiA9IFwiXCI7dmFyIGkgPSBbXTt2YXIgYSA9IDE2MzgzO2ZvciAodmFyIHUgPSAwLCBkID0gdCAtIG87IHUgPCBkOyB1ICs9IGEpIHtcbiAgICAgICAgICBpLnB1c2goaChyLCB1LCB1ICsgYSA+IGQgPyBkIDogdSArIGEpKTtcbiAgICAgICAgfWlmIChvID09PSAxKSB7XG4gICAgICAgICAgZSA9IHJbdCAtIDFdO2YgKz0gbltlID4+IDJdO2YgKz0gbltlIDw8IDQgJiA2M107ZiArPSBcIj09XCI7XG4gICAgICAgIH0gZWxzZSBpZiAobyA9PT0gMikge1xuICAgICAgICAgIGUgPSAoclt0IC0gMl0gPDwgOCkgKyByW3QgLSAxXTtmICs9IG5bZSA+PiAxMF07ZiArPSBuW2UgPj4gNCAmIDYzXTtmICs9IG5bZSA8PCAyICYgNjNdO2YgKz0gXCI9XCI7XG4gICAgICAgIH1pLnB1c2goZik7cmV0dXJuIGkuam9pbihcIlwiKTtcbiAgICAgIH1cbiAgICB9LCB7fV0gfSwge30sIFtdKShcIi9cIik7XG59KTsiLCJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgdmFyIGFwcCA9IHtcbiAgICBib3g6IGZ1bmN0aW9uIGJveCgpIHtcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQoXCJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInZpZXdwb3J0XFxcIj5cXG4gICAgICAgICAgPHNwYW4gaWQ9XFxcInQtd2lkdGhcXFwiPjwvc3Bhbj4geCA8c3BhbiBpZD1cXFwidC1oZWlnaHRcXFwiPjwvc3Bhbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIFwiKTtcbiAgICB9LFxuICAgIGNhbGN1bGF0ZURpbWVuc2lvbnM6IGZ1bmN0aW9uIGNhbGN1bGF0ZURpbWVuc2lvbnMoKSB7XG4gICAgICB2YXIgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgdmFyIGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAkKFwiI3Qtd2lkdGhcIikuaHRtbCh3KTtcbiAgICAgICQoXCIjdC1oZWlnaHRcIikuaHRtbChoKTtcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICBhcHAuYm94KCk7XG4gICAgICBhcHAuc2l6ZXIoKTtcbiAgICB9LFxuICAgIHNpemVyOiBmdW5jdGlvbiBzaXplcigpIHtcbiAgICAgIGFwcC5jYWxjdWxhdGVEaW1lbnNpb25zKCk7XG4gICAgICBhcHAudG9nZ2xlQm94KCk7XG4gICAgfSxcbiAgICB0b2dnbGVCb3g6IGZ1bmN0aW9uIHRvZ2dsZUJveCgpIHtcbiAgICAgICQoJy52aWV3cG9ydCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgYXBwLmluaXQoKTsgLy9jMDI4XG4gIH0pO1xuXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5zaXplcigpOyAvL2MwMjhcbiAgfSk7XG59KSh3aW5kb3cualF1ZXJ5KTsiXX0=
